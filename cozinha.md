# Cozinha

## Menu

- [Home](./readme.md)
- How it works
  - [Software](./how/software.md)
  - [Lights](./how/lights.md)
  - [Occupancy](./how/occupancy.md)
  - [Energy Monitoring](./how/energy.md)
- Dumb2Smart
  - [Microwave](./dumb2smart/microwave.md)
  - [Coffee Machine](./dumb2smart/coffee_machine.md)

## Ligações

ligações:
- [marquise](./marquise.md)
- [corredor 1](./corredores.md)


## B.O.M

![switch](https://www.zigbee2mqtt.io/images/devices/TS0011_switch_module.jpg) 
![switch](https://www.zigbee2mqtt.io/images/devices/TS0012_switch_module.jpg) 
![switch](https://www.zigbee2mqtt.io/images/devices/TS0011_switch_module.jpg) 
![switch](https://www.zigbee2mqtt.io/images/devices/TS0012_switch_module.jpg) 
![zth2](https://www.zigbee2mqtt.io/images/devices/ZTH02.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![imagem](https://www.zigbee2mqtt.io/images/devices/TS011F_plug_1.jpg)
![pir](https://www.zigbee2mqtt.io/images/devices/IH012-RT01.jpg)
![pir](https://www.zigbee2mqtt.io/images/devices/IH012-RT01.jpg)
![pir](https://www.zigbee2mqtt.io/images/devices/IH012-RT01.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![contact](https://www.zigbee2mqtt.io/images/devices/TS0203.jpg)
![water](https://www.zigbee2mqtt.io/images/devices/IH-K665.jpg)


![imagem](https://github.com/JarbasAl/smarthouse/assets/33701864/d24afd4f-9da1-49ef-b683-4665ede887f1)
![imagem](https://github.com/JarbasAl/smarthouse/assets/33701864/8f8f7a9c-e560-4652-9d3b-784fe844c4df)
![imagem](https://github.com/JarbasAl/smarthouse/assets/33701864/2a1bb2e1-8fd0-4f2e-8270-487e58bcc92b)

- PIR: 3
  - [IH012-RT01](https://www.zigbee2mqtt.io/devices/IH012-RT01.html#tuya-ih012-rt01) - entrance
  - [IH012-RT01](https://www.zigbee2mqtt.io/devices/IH012-RT01.html#tuya-ih012-rt01) - under the TV
  - [IH012-RT01](https://www.zigbee2mqtt.io/devices/IH012-RT01.html#tuya-ih012-rt01) - marquise door
- Temperature: 1
  - [ZTH02](https://www.zigbee2mqtt.io/devices/ZTH02.html#tuya-zth02)
- Water Leak: 1
  - [IH-K665](https://www.zigbee2mqtt.io/devices/IH-K665.html#aubess-ih-k665) - coffee machine
- Light Switch: 2
  - [switch TS0011](https://www.zigbee2mqtt.io/devices/TS0011_switch_module.html#tuya-ts0011_switch_module) cozinha - 1 times ? W lamps
  - [switch TS0012](https://www.zigbee2mqtt.io/devices/TS0012_switch_module.html#tuya-ts0012_switch_module) cozinha 2 - 1 times ? W lamps   ( + 1 unused gang)
  - [switch TS0012](https://www.zigbee2mqtt.io/devices/TS0012_switch_module.html#tuya-ts0012_switch_module) marquise - 1 times ? W lamps   ( + 1 unused gang)
- Smart Plugs: 6 
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - microwave
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - fridge
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - freezer
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - dishwasher
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - coffee machine
  - [plug ts011f](https://www.zigbee2mqtt.io/devices/TS011F_plug_1.html#tuya-ts011f_plug_1) - air fryer
- Door Sensors: 5
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - fridge
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - fridge 2 (freezer)
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - freezer
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - microwave
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - coffee machine
- Dumb TV: 1
  - Hisense - 80 - 120 W  (vertical)
- Media Players: 1
  - Raspberry pi 4  (HDMI 1 / Spotify)
- Cameras: 1
  - Playstation Eye USB - via Raspberry pi 4
- Microphone: 1
  - Playstation Eye USB - via Raspberry pi 4
- Audio Output: 1
  - TV - HDMI (Raspberry pi 4)
     
Armarios; (dispensa)
  - Light Switch: 1  
    - [switch TS0011](https://www.zigbee2mqtt.io/devices/TS0011_switch_module.html#tuya-ts0011_switch_module) dispensa - 1 times ? W lamps
  - Door Contact: 1
    - [TS0203](https://www.zigbee2mqtt.io/devices/TS0203.html#tuya-ts0203) - coffee machine
  - Window Contact: 0 - (TODO - 1)

### Software

- Raspberry pi 4
  - [ovos-raspbian](https://github.com/OpenVoiceOS/raspbian-ovos) - Base Operating System / Voice Assistant
  - [ovos-shell](https://github.com/OpenVoiceOS/ovos-shell) - GUI  (via EGLFS)
  - [ovos-PHAL-zmqamera](https://github.com/OpenVoiceOS/ovos-PHAL-zmqamera) - expose camera to [zmq2mjpeg](https://github.com/OpenJarbas/zmq2mjpeg) 
  - [HiveMind](https://jarbashivemind.github.io/HiveMind-community-docs/) - Notify via Home Assistant
  - [ovos-PHAL-sensors](https://github.com/OpenVoiceOS/ovos-PHAL-sensors) - RPI sensors in Home Assistant
  - [PowerGuess](https://github.com/OpenJarbas/powerguess) - fake power consumption in Home Assistant
  - [Spotifyd](https://github.com/Spotifyd/spotifyd) . accepts audio streaming from spotify

## Automations

- if `occupancy` changes to **ON** **+** is `night_time` **+ NOT** `sleeping` -> `turn on` lights
- if `occupancy` changes to **OFF** -> `turn off` lights **+** `turn off` appliances (microwave / coffee machine)
- if `house_sleep` changes to **ON** + `occupancy` is **OFF** -> `turn off` lights **+** `turn off` appliances (microwave / coffee machine)
- coffee machine automations (TODO)
- microwave automations  (TODO)
- fridge automations  (TODO)

`occupancy` is explained [here](./how/occupancy.md)

### Occupancy

when any condition triggers -> cozinha occupancy is **on**:
- fridge door open
- freezer door open
- microwave door open
- microwave heating
- coffee machine working
- PIR sensor (movement)
- lights on
